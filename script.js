function autoMoveLeft(t){t.css("margin-left",function(t,n){return parseInt(n,10)-50+"px"}),t.find("input.input-level").val(function(t,n){return parseInt(n,10)-1})}function moveRight(t){t.closest(".task-block").css("margin-left",function(t,n){return parseInt(n,10)+50+"px"}),t.parents(".task-block").find("input.input-level").val(function(t,n){return parseInt(n,10)+1})}function moveLeft(t){t.closest(".task-block").css("margin-left",function(t,n){return parseInt(n,10)-50+"px"}),t.parents(".task-block").find("input.input-level").val(function(t,n){return parseInt(n,10)-1})}function sectionize(){for(var t=[],n=$(".task-block"),i=n.length,e=0;i>e;e++){var a=$(n[e]).find(".input-level").val(),s=parseInt(a,10);t.push(s)}console.log(t);var l=[],o=[],c=[],r=Math.max.apply(Math,l);if(console.log(r),0==r)return 0;for(var u=1,d=1;r>=d;d++){for(var e=0;i>e;e++)t[e]==d&&l.push(e);console.log("positionArray: "+l),o.push(l[0]);for(var e=1;e<l.length;e++)l[e]!=l[e-1]+1&&o.push(l[e]);console.log("start: "+o);for(var e=1;e<o.length;e++)c.push(o[e-1]);c.push(l[l.length-1]),console.log("end: "+c);for(var e=0;e<o.length;e++){for(var k=o[e];k<=c[e];k++)$(n[k]).find(".input-section").val(function(){return u});u++}l.length=0,o.length=0,c.length=0}}function disableSubmit(){$("#submit").attr("disabled","disabled")}function actSubmit(){$("#submit").removeAttr("disabled")}$(document).on("click",".add",function(){var t=$(this).closest(".task-block"),n=t.clone();$(n).find("input:text").val(""),$(n).insertAfter(t),$(".task-block").each(function(t){$(this).attr("id",t+"taskBlock"),$(this).find(".input-task").attr("id",t+"task").attr("name",t+"task"),$(this).find(".input-link").attr("id",t+"link").attr("name",t+"link"),$(this).find(".input-code").attr("id",t+"code").attr("name",t+"code"),$(this).find(".input-level").attr("id",t+"level").attr("name",t+"level"),$(this).find(".input-section").attr("id",t+"section").attr("name",t+"section")}),disableSubmit()}),$(document).on("click",".delete",function(){if("0taskBlock"!=$(this).closest(".task-block").attr("id")){var t=$(this).closest(".task-block"),n=t.find("input.input-level").val(),i=-1;if(i!=$(".task-block").length-1){i=parseInt(t.attr("id").substring(0,1),10);var e=$(this).closest(".task-block").next(),a=e.find("input.input-level").val(),s=t.prev().find("input.input-level").val();n>s&&a>n&&autoMoveLeft(e)}$(this).closest(".task-block").remove(),$(".task-block").each(function(t){$(this).attr("id",t+"taskBlock"),$(this).find(".input-task").attr("id",t+"task").attr("name",t+"task"),$(this).find(".input-link").attr("id",t+"link").attr("name",t+"link"),$(this).find(".input-code").attr("id",t+"code").attr("name",t+"code"),$(this).find(".input-level").attr("id",t+"level").attr("name",t+"level"),$(this).find(".input-section").attr("id",t+"section").attr("name",t+"section")}),disableSubmit()}}),$(document).on("click",".to-Right",function(){"0taskBlock"!=$(this).closest(".task-block").attr("id")&&($(this).parents(".task-block").prev().find("input.input-level").val()>=$(this).parents(".task-block").find("input.input-level").val()&&moveRight($(this)),disableSubmit())}),$(document).on("click",".to-Left",function(){var t=$(".task-block"),n=$(t[t.length-1]).attr("id"),i=$(this).parents(".task-block").find("input.input-level").val();$(this).closest(".task-block").attr("id")==n?i>0&&(moveLeft($(this)),disableSubmit()):i>=$(this).parents(".task-block").next().find("input.input-level").val()&&i>0&&(moveLeft($(this)),disableSubmit())}),$(document).on("click","#sectionize",function(){sectionize(),actSubmit()});